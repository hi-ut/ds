(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{103:function(e,t,r){"use strict";var n=r(184);n.a.apps.length||n.a.initializeApp({apiKey:"AIzaSyCQJq5w0NLHWFhXEHg94qf2dEHxHfHAgrs",authDomain:"kunshujo.firebaseapp.com",projectId:"kunshujo",storageBucket:"kunshujo.appspot.com",messagingSenderId:"767668937895",appId:"1:767668937895:web:cc05564c1dca8e22f0e782"}),t.a=n.a},223:function(e,t,r){"use strict";r.r(t);r(68),r(229),r(30),r(186);var n=r(19),o=r(32),c=r(36),l=r(33),f=r(23),v=r(11),d=r(105);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var m=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},y=function(e){Object(c.a)(r,e);var t=h(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).queryKeyword="",e.keywords=[],e}return Object(o.a)(r,[{key:"trigger",value:function(e){13===e.keyCode&&this.search()}},{key:"search",value:function(){var e=this.queryKeyword;e||(e="");for(var t=this.$searchUtils.splitKeyword(e),r=Object.assign({},this.$route.query),n=[],i=0;i<t.length;i++){var o=t[i];"keyword"===o.label&&n.push(o.value)}r.keyword=n,r.from=0,this.$router.push(this.localePath({name:"search",query:r}),(function(){}),(function(){}))}},{key:"keywordStr",get:function(){var e=this.$store.state.keyword;return Array.isArray(e)?e.join(" "):e},set:function(e){this.queryKeyword=e}}]),r}(d.Vue),k=y=m([Object(d.Component)({})],y),_=r(82),w=r(95),j=r.n(w),x=r(447),component=Object(_.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-text-field",{attrs:{"single-line":"","background-color":"grey lighten-2",filled:"",rounded:"",dense:"","hide-details":"",label:e.$t("search"),clearable:"","clear-icon":"mdi-close-circle","append-icon":"mdi-magnify"},on:{"click:append":e.search,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.trigger(t)}},model:{value:e.keywordStr,callback:function(t){e.keywordStr=t},expression:"keywordStr"}})],1)}),[],!1,null,null,null);t.default=component.exports;j()(component,{VTextField:x.a})},227:function(e,t,r){"use strict";(function(e){r(68);var n=r(19),o=r(32),c=function(){function t(){Object(n.a)(this,t)}return Object(o.a)(t,[{key:"formatArrayValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:", ";if(null==e)return"";if(1===e.length)return e[0];var r=e.join(t);return r}},{key:"getProjectFooter",value:function(t){return"ja"===t?e.env.projectFooterJa:e.env.projectFooterEn}},{key:"getProjectName",value:function(t){return"ja"===t?e.env.projectNameJa:e.env.projectNameEn}},{key:"getProjectDescription",value:function(t){return"ja"===t?e.env.projectDescriptionJa:e.env.projectDescriptionEn}},{key:"truncate",value:function(e,t){return e&&e["@id"]?"":(e=String(e)).length<=t?e:e.substring(0,t)+"..."}}]),t}();t.a=function(e,t){t("utils",new c)}}).call(this,r(133))},228:function(e,t,r){"use strict";r(275),r(277),r(24),r(55),r(34),r(44),r(76),r(16),r(65),r(22),r(30),r(441),r(41),r(67),r(61),r(48),r(62),r(57),r(66);var n=r(31),o=(r(50),r(13)),c=r(298),l=r(19),f=r(32),v=r(79),d=r.n(v);function h(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var y=function(){function e(){Object(l.a)(this,e),this.shuffle=function(e){for(var t=Object(c.a)(e).slice(0),i=t.length-1;i>=0;i--){var r=Math.floor(Math.random()*(i+1)),n=[t[r],t[i]];t[i]=n[0],t[r]=n[1]}return t}}var t,r,v;return Object(f.a)(e,[{key:"splitKeyword",value:function(e){for(var t=e.replace(/　/g," ").split(" ").filter((function(e){return""!==e})),r=[],i=0;i<t.length;i++){var n=t[i],o=n.split(":");2===o.length?r.push({label:"q-"+o[0].trim(),value:o[1].trim()}):r.push({label:"keyword",value:n})}return r}},{key:"createFacetQuery",value:function(e){for(var t={},i=0;i<e.length;i++){var r=e[i];t[r.field]=r.value}return t}},{key:"createQuery",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=Object.keys(t.facetOptions),o=["tags"],c=50,l=e.from?Number(e.from):0,f=e.size?Number(e.size):t.size,v={keyword:"true"===e.keywordOr,q:"true"===e.advancedOr,fc:"true"===e.facetOr};f>500&&(f=500);for(var d={},h={},i=0;i<n.length;i++){var m=n[i],y="fc-"+m;if(e[y]){var k=e[y],_=[];_=Array.isArray(k)?k:[k],h[y]=_}var option=t.facetOptions[m],w=option.orderKey||"_count",j=option.orderValue||"desc",x={};x[w]=j,d[m]={terms:{field:m+".keyword",size:r?option.size||c:-1,order:x}}}var O={bool:{must:[],should:[],filter:[],must_not:[]}},S=e.keyword?e.keyword:[],A=[];A=Array.isArray(S)?S:[S];for(var I=0;I<A.length;I++){var P=A[I];if(P.startsWith("-"))for(var F=0;F<o.length;F++){var N={};N[o[F]]=P.slice(1),O.bool.must_not.push({match_phrase:N})}else if(v.keyword);else{for(var C=[],U=0;U<o.length;U++){var R={};R[o[U]]=P,C.push({match_phrase:R})}O.bool.must.push({bool:{should:C}})}}for(var V in e)if(V.startsWith("q-")||V.startsWith("fc-")){var L=V,$=L.split("-")[0],z=L.split("-")[0],D="q"===z?"must":"filter",E=v[z]?"should":D,T=e[L],W=[];W=Array.isArray(T)?T:[T];for(var H=[],K=[],M=0;M<W.length;M++){var J=W[M];J.startsWith("-")?K.push(J.slice(1)):H.push(J)}for(var Q=0;Q<K.length;Q++){var G=K[Q];if("fc"===$){var B={};B[V.slice(3)+".keyword"]=G,O.bool.must_not.push({term:B})}else{var X={};X[V.slice(2)]=G,O.bool.must_not.push({term:X})}}if(0===H.length)continue;if("fc"===$){for(var Y=[],Z=0;Z<H.length;Z++){var ee=W[Z],te={};te[V.slice(3)+".keyword"]=ee,Y.push({term:te})}O.bool[E].push({bool:{should:Y}})}else for(var re=0;re<H.length;re++){var ne=W[re],ae={};ae[V.slice(2)]=ne,O.bool[E].push({term:ae})}}var ie=e.sort?e.sort:null,oe=[];if(null!=ie&&!ie.includes("_score")){var se=ie.split(":"),ue=se[0],ce=se[1],le={};le[ue]={order:ce},oe.push(le),oe.push("_score")}var body={query:O,aggs:d,size:f,from:l,sort:oe};return body}},{key:"initStore",value:function(e,t){e.commit("setIndex",t.index),e.commit("setData",t.data)}},{key:"loadIndex",value:(v=Object(o.a)(regeneratorRuntime.mark((function e(u){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(u).then((function(e){for(var t=e.data,data=[],r={},i=0;i<t.length;i++){var n=t[i],o={},c="";for(var l in n)if(!l.startsWith("_")){var f=n[l];f=Array.isArray(f)?f:[f],o[l]=f,r[l]||(r[l]={});for(var v=0;v<f.length;v++){var d=f[v];d&&String(d).startsWith("http")||(r[l][d]||(r[l][d]=[]),r[l][d].push(i),c+=d+" ")}}var h="_id",m=n._id;r[h]||(r[h]={}),r[h][m]||(r[h][m]=[]),r[h][m].push(i),r[h="_full_text"]||(r[h]={}),r[h][c]||(r[h][c]=[]),r[h][c].push(i),n._label&&(o._label=[n._label]),n._image&&(o._thumbnail=[n._image]),n._related&&(o._relatedLink=[n._related]),n._url&&(o._url=[n._url]);var y={_id:m,_source:o};data.push(y)}return{data:data,index:r}}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)})},{key:"createIndex",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(u){var data,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(u).then((function(e){var r=e.data;return"cr:Curation"===r["@type"]?t.createIndexFromIIIFCurationList(r):{}}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"createIndexFromIIIFCurationList",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t){var title,r,n,data,o,c,l,f,v,i,h,m,y,k,_,w,label,j,x,O,S,A,I,P,F,N,C,U,R,V,L,$,z,D,E,T,W,H,K,M,J,Q,G,B,X,area,image,Y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:title=t.label,r="",n=t["@id"],t.thumbnail&&(r=t.thumbnail),data=[],o=t.selections,c=1,l={},f={},v={},i=0;case 11:if(!(i<o.length)){e.next=86;break}h=o[i],m=h.members,y=h.within["@id"],k=0;case 16:if(!(k<m.length)){e.next=83;break}if(_=m[k],w="",0===i&&0===k&&""===r&&(r=_.thumbnail),(label=_.label)["@value"]&&(label=label["@value"]),j={_label:[label]},_.related&&(j._related=[_.related]),_.thumbnail?j._thumbnail=[_.thumbnail]:(f[y]||(f[y]={}),f[y][c-1]=_["@id"]),x={},!(O=_.metadata)){e.next=45;break}S=0;case 29:if(!(S<O.length)){e.next=45;break}if(A=O[S],I=A.value,Array.isArray(I)||(I=[I]),!(P=I[0])||"oa:Annotation"!==P["@type"]){e.next=38;break}return F=P.resource.chars.replace(/<[^>]*>?/gm,""),j._label=[F],e.abrupt("continue",42);case 38:for(j[A.label]||(j[A.label]=[]),N=0;N<I.length;N++)C=I[N],j[A.label].includes(C)||j[A.label].push(C);A.property&&(U=A.property,x[U]||(x[U]={}),A.uri?x[U][A.uri]||(x[U][A.uri]={label:A.value}):x[U][A.value]||(x[U][A.valu]={label:A.value})),A.property&&(R=A.property,v[R]||(v[R]={}),V=A.uri,L=A.value,v[R][V]||(v[R][V]={label:L,count:0}),$=v[R][V].count+1,v[R][V].count=$);case 42:S++,e.next=29;break;case 45:j._manifest=[y],e.t0=regeneratorRuntime.keys(j);case 47:if((e.t1=e.t0()).done){e.next=69;break}z=e.t1.value,l[z]||(l[z]={}),D=j[z],E=0;case 52:if(!(E<D.length)){e.next=67;break}if(T=D[E],!Array.isArray(T)){e.next=56;break}return e.abrupt("continue",64);case 56:if(!T||!T["@id"]){e.next=58;break}return e.abrupt("continue",64);case 58:if(!T||!String(T).startsWith("http")||"_manifest"===z){e.next=60;break}return e.abrupt("continue",64);case 60:l[z][T]||(l[z][T]=[]),W=c-1,l[z][T].push(W),w+=T+" ";case 64:E++,e.next=52;break;case 67:e.next=47;break;case 69:l[H="_full_text"]||(l[H]={}),l[H][w]||(l[H][w]=[]),l[H][w].push(c-1),j._curation=[n],j._pos=[c],K={_id:j.m_sort[0],_source:j,entity:x},_.images&&(K.images=_.images),_.texts&&(K.texts=_.texts),data.push(K),c+=1;case 80:k++,e.next=16;break;case 83:i++,e.next=11;break;case 86:e.t2=regeneratorRuntime.keys(f);case 87:if((e.t3=e.t2()).done){e.next=98;break}return M=e.t3.value,e.next=91,d.a.get(M).then((function(e){for(var t={},r=e.data.sequences[0].canvases,n=0;n<r.length;n++){var canvas=r[n];canvas.images[0].resource.service?t[canvas["@id"]]=canvas.images[0].resource.service["@id"]+"/info.json":t[canvas["@id"]]=canvas.images[0].resource["@id"]}return t})).catch((function(){return null}));case 91:if(J=e.sent){e.next=94;break}return e.abrupt("continue",87);case 94:for(G in Q=f[M])B=Q[G].split("#xywh="),X=B[0],area=B[1],(image=J[X])&&(image.includes("info.json")&&(image=image.replace("info.json",area+"/256,/0/default.jpg")),data[Number(G)]._source._thumbnail=[image]);e.next=87;break;case 98:return Y="list","annotation"===t.viewingHint?Y="table":t.viewingHint&&(Y=t.viewingHint),e.abrupt("return",{data:data,index:l,title:title,thumbnail:r,json:t,entity:v,api:t.api,layout:Y,description:t.description});case 101:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"search",value:function(e,t,r){var n=this.filter(e,t,r),o=this.getDataFiltered(n,t),c=this.createFacets(e,n,r.aggs);return o=this.sortData(r.sort,o),{aggregations:c,hits:{hits:this.getResult(o,r.from,r.size),total:{relation:r.sort,value:o.length}}}}},{key:"filter",value:function(e,t,r){for(var o=this,c=[],i=0;i<t.length;i++)c.push(i);if(!r.query)return c;var l=r.query.bool,f=new Set(c),v=new Set,d={filter:!1,must:!1,must_not:!1,should:!1};for(var m in l){var y=l[m];y.length>0&&(d[m]=!0);for(var k=function(t){var r=y[t],l=new Set;if(r.bool){var d=r.bool.should;l=new Set([]);for(var h=0;h<d.length;h++){var k=o.getIds(e,c,d[h],m);l=new Set([].concat(Object(n.a)(l),Object(n.a)(k)))}}else l=o.getIds(e,c,r,m);"should"!==m?f=new Set(Object(n.a)(f).filter((function(e){return l.has(e)}))):v=new Set([].concat(Object(n.a)(v),Object(n.a)(l)))},_=0;_<y.length;_++)k(_)}!d.should||d.must||d.filter||d.must_not||(f=new Set([]));var w,j=[],x=h(new Set([].concat(Object(n.a)(f),Object(n.a)(v))));try{for(x.s();!(w=x.n()).done;){var O=w.value;j.push(O)}}catch(e){x.e(e)}finally{x.f()}return j}},{key:"getIds",value:function(e,t,r,n){var o=r[Object.keys(r)[0]],c=Object.keys(o)[0],l=o[c],f="Phone/Word.keyword"!==c;l=f?l.toLowerCase():l;var v=[];if("must_not"===n&&(v=t),c.includes(".keyword")){var d=e[c=c.replace(".keyword","")];for(var h in d){(f?h.toLowerCase():h)===l&&function(){var e=d[h];v="must_not"!==n?v.concat(e):v.filter((function(t){return!e.includes(t)}))}()}}else{var map=e[c];for(var m in map){(f?m.toLowerCase():m).includes(l)&&function(){var e=map[m];v="must_not"!==n?v.concat(e):v.filter((function(t){return!e.includes(t)}))}()}}return new Set(v)}},{key:"getDataFiltered",value:function(e,t){for(var r=[],i=0;i<e.length;i++)r.push(t[e[i]]);return r}},{key:"createFacets",value:function(e,t,r){var n={},o=function(label){var o=r[label].terms,c=o.size?Number(o.size):-1,l=o.field.replace(".keyword",""),map=e[l],f={};for(var v in map){for(var d=[],h=map[v],i=0;i<h.length;i++)t.includes(h[i])&&d.push(h[i]);var m=d.length;m>0&&(f[v]=m)}var y=Object.keys(f).map((function(e){return{key:e,value:f[e]}})),k=Object.keys(o.order)[0],_="value";"_term"==k&&(_="key");var w=1;"asc"==o.order[k]&&(w=-1),y.sort((function(a,b){return a[_]<b[_]?w:a[_]>b[_]?-1*w:0})),(-1===c||c>y.length)&&(c=y.length);for(var j=[],x=0;x<c;x++){var O={key:y[x].key,doc_count:y[x].value};j.push(O)}n[label]={buckets:j}};for(var label in r)o(label);return n}},{key:"sortData",value:function(e,t){var r,n=(r=e,Array.isArray(r)?r:[r])[0];if(!n)return t;var o=Object.keys(n)[0];if("_random"===o)return this.shuffle(t);var c=n[o].order;o=o.replace(".keyword","");var l=!0;"desc"===c&&(l=!1);var f=1,v=-1;return l||(f*=-1,v*=-1),t.sort((function(a,b){return a._source[o]?b._source[o]?a._source[o][0]>b._source[o][0]?f:a._source[o][0]<b._source[o][0]?v:0:v:f})),t}},{key:"getResult",value:function(e,t,r){var n=[],o=t+r;o>e.length&&(o=e.length);for(var i=t;i<o;i++)n.push(e[i]);return n}},{key:"getSearchQueryFromQueryStore",value:function(e,u){var t={sort:e.sort,size:e.size,from:(e.currentPage-1)*e.size,col:e.col,layout:e.layout};e.keyword.length>0&&(t.keyword=e.keyword);for(var r=e.advanced,n=["fc","q"],o=0;o<n.length;o++){var c=n[o];for(var label in r[c]){var l=[],f=r[c][label];for(var v in f)for(var d=f[v],i=0;i<d.length;i++){var h=d[i];l.push("+"===v?h:"-"+h)}t[label]=l}}return u&&(t.u=u),t}},{key:"getTopMessage",value:function(e,t,r){var n="",o="ja"===r?"件":"";return e===t&&(n="ja"===r?"上位":"Top "),n+e.toLocaleString()+o}}]),e}();t.a=function(e,t){t("searchUtils",new y)}},268:function(e,t,r){var content=r(336);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(15).default)("7750648c",content,!0,{sourceMap:!1})},300:function(e,t,r){"use strict";r(229),r(50);var n=r(13),o=r(19),c=r(32),l=r(36),f=r(33),v=r(23),d=r(11),h=r(105),m=r(103),y=r(223);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(v.a)(e);if(t){var o=Object(v.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}var _=function(e,t,r,desc){var n,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},w=function(e){Object(l.a)(f,e);var t,r=k(f);function f(){var e;return Object(o.a)(this,f),(e=r.apply(this,arguments)).fab=!1,e.drawer=!1,e.baseUrl="https://hi-ut.github.io/ds",e.title="データ駆動型検索プロトタイプ",e.dialog4login=!1,e}return Object(c.a)(f,[{key:"created",value:function(){this.onAuthStateChanged()}},{key:"onScroll",value:function(e){if("undefined"!=typeof window){var t=window.pageYOffset||e.target.scrollTop||0;this.fab=t>20}}},{key:"toTop",value:function(){this.$vuetify.goTo(0)}},{key:"signInWithGoogle",value:function(){this.$store.dispatch("login"),this.dialog4login=!this.dialog4login}},{key:"onAuthStateChanged",value:function(){var e=this;m.a.auth().onAuthStateChanged((function(t){e.userUid=t?t.uid:null,e.userName=t?t.displayName:null,e.userPic=t?t.photoURL:null,e.isSignedIn=!!t}))}},{key:"signOut",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.auth().signOut();case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"userName",get:function(){return this.$store.getters.getUserName},set:function(e){this.$store.commit("setUserName",e)}},{key:"userPic",get:function(){return this.$store.getters.getUserPic},set:function(e){this.$store.commit("setUserPic",e)}},{key:"userUid",get:function(){return this.$store.getters.getUserUid},set:function(e){this.$store.commit("setUserUid",e)}},{key:"isSignedIn",get:function(){return this.$store.getters.getIsSignedIn},set:function(e){this.$store.commit("setSignedIn",e)}}]),f}(h.Vue),j=w=_([Object(h.Component)({components:{FullTextSearch:y.default}})],w),x=r(82),O=r(95),S=r.n(O),A=r(456),I=r(463),P=r(458),F=r(218),N=r(236),C=r(219),U=r(120),R=r(457),V=r(459),L=r(460),$=r(216),z=r(220),D=r(136),E=r(221),T=r(98),W=r(461),H=r(445),K=r(464),M=r(462),J=r(292),Q=r(293),G=r.n(Q),B=r(177),component=Object(x.a)(j,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("div",[r("v-navigation-drawer",{attrs:{app:"",temporary:!0},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-list",[r("v-list-item",{attrs:{link:"",to:e.localePath({name:"index"}),exact:""}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-home")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v("Home")])],1)],1),e._v(" "),r("v-list-item",{attrs:{link:"",to:e.localePath({name:"search"})}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-magnify")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.$t("search")))])],1)],1),e._v(" "),r("v-list-item",{attrs:{link:"",to:e.localePath({name:"entity-id",params:{id:"agential"}})}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-account")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.$t("事物")))])],1)],1),e._v(" "),r("v-list-item",{attrs:{link:"",to:e.localePath({name:"fav"})}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-heart-outline")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(e.$t("お気に入り")))])],1)],1),e._v(" "),r("v-list-item",{attrs:{link:"",href:e.baseUrl+"/snorql",target:"_blank"}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-magnify")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v("SPARQL Endpoint\n              "),r("v-icon",[e._v("mdi-open-in-new")])],1)],1)],1),e._v(" "),r("v-list-item",{attrs:{link:"",href:"https://iiif.dl.itc.u-tokyo.ac.jp/repo/s/tanaka/",target:"_blank"}},[r("v-list-item-action",[r("v-icon",[e._v("mdi-image")])],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v("田中芳男・博物学コレクション\n              "),r("v-icon",[e._v("mdi-open-in-new")])],1)],1)],1)],1)],1),e._v(" "),r("v-app-bar",[r("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),r("v-toolbar-title",[r("nuxt-link",{staticStyle:{color:"inherit","text-decoration":"inherit"},attrs:{to:e.localePath({name:"index"})}},[e._v("\n          "+e._s(e.title)+"\n        ")])],1),e._v(" "),"xs"!=e.$vuetify.breakpoint.name?[r("v-spacer"),e._v(" "),r("FullTextSearch")]:e._e(),e._v(" "),r("v-spacer"),e._v(" "),r("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{depressed:"",btn:""}},n),[r("v-icon",[e._v("mdi-translate")])],1)]}}])},[e._v(" "),r("v-list",[r("v-list-item",{attrs:{to:e.switchLocalePath("ja")}},[r("v-list-item-title",[e._v("日本語")])],1),e._v(" "),r("v-list-item",{attrs:{to:e.switchLocalePath("en")}},[r("v-list-item-title",[e._v("English")])],1)],1)],1),e._v(" "),e.isSignedIn?[r("v-menu",{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{icon:""}},n),[r("v-avatar",{attrs:{size:"36"}},[r("img",{attrs:{src:e.userPic,alt:e.userName}})])],1)]}}],null,!1,4162295382)},[e._v(" "),r("v-list",[r("v-list-item",{on:{click:function(t){e.dialog=!e.dialog}}},[r("v-list-item-title",[e._v("プロフィール編集")])],1),e._v(" "),r("v-list-item",{on:{click:e.signOut}},[r("v-list-item-title",[e._v("ログアウト")])],1)],1)],1)]:[r("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog4login=!e.dialog4login}}},[e._v("ログイン")])]],2)],1),e._v(" "),r("v-main",[r("nuxt")],1),e._v(" "),r("v-footer",{staticClass:"mt-5",attrs:{dark:!0}},[r("v-container",[r("p",{staticClass:"text-center my-5"},[(e.$i18n.locale,[e._v("\n          東京大学学術資産等アーカイブズ委員会事務局"),r("br"),e._v("\n          （東京大学附属図書館総務課／学術資産アーカイブ化推進室）")])],2),e._v(" "),r("p",{staticClass:"text-center my-5"},[(e.$i18n.locale,[e._v("\n          E-mail：digital-archive [at] lib.u-tokyo.ac.jp\n        ")])],2)])],1),e._v(" "),r("v-dialog",{attrs:{width:"500"},model:{value:e.dialog4login,callback:function(t){e.dialog4login=t},expression:"dialog4login"}},[r("v-card",[r("v-card-title",{staticClass:"primary white--text",attrs:{"primary-title":""}},[e._v("ログイン")]),e._v(" "),r("v-card-text",{staticClass:"mt-5"},[e._v("\n        ログインにはGoogle"),e._v("アカウントが必要です。\n        "),r("div",{staticClass:"text-center mb-5"},[r("v-btn",{staticClass:"error mt-5",on:{click:e.signInWithGoogle}},[r("v-icon",{staticClass:"mr-2"},[e._v("mdi mdi-google")]),e._v("Googleアカウントでログイン\n          ")],1)],1)])],1)],1),e._v(" "),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.fab,expression:"fab"},{name:"scroll",rawName:"v-scroll",value:e.onScroll,expression:"onScroll"}],attrs:{fab:"",dark:"",fixed:"",bottom:"",right:"",large:"",color:"error"},on:{click:e.toTop}},[r("v-icon",[e._v("mdi-arrow-up")])],1)],1)}),[],!1,null,null,null);t.a=component.exports;S()(component,{FullTextSearch:r(223).default}),S()(component,{VApp:A.a,VAppBar:I.a,VAppBarNavIcon:P.a,VAvatar:F.a,VBtn:N.a,VCard:C.a,VCardText:U.b,VCardTitle:U.c,VContainer:R.a,VDialog:V.a,VFooter:L.a,VIcon:$.a,VList:z.a,VListItem:D.a,VListItemAction:E.a,VListItemContent:T.a,VListItemTitle:T.b,VMain:W.a,VMenu:H.a,VNavigationDrawer:K.a,VSpacer:M.a,VToolbarTitle:J.a}),G()(component,{Scroll:B.b})},311:function(e,t,r){r(312),e.exports=r(313)},335:function(e,t,r){"use strict";r(268)},336:function(e,t,r){(t=r(14)(!1)).push([e.i,"h1[data-v-66a519aa]{font-size:20px}",""]),e.exports=t},417:function(e,t,r){"use strict";r.r(t),r.d(t,"state",(function(){return c})),r.d(t,"mutations",(function(){return l})),r.d(t,"actions",(function(){return f})),r.d(t,"getters",(function(){return v}));r(55),r(34),r(76),r(16),r(22),r(41),r(62),r(66);var n=r(103);n.a.firestore().collection("users");function o(e){return Array.isArray(e)?e:[e]}var c=function(){return{sort:"",size:-1,from:-1,keyword:[],advanced:{},currentPage:1,layout:"",col:-1,facetFlag:!0,facetFlags:{},facetLabels:{},facetOptions:{},result:{},data:[],index:null,selected:[],userUid:"",userName:"",userPic:"",items:[],isSignedIn:!1}},l={init:function(e,t){var r=t.keyword;for(var n in e.keyword=r?Array.isArray(r)?r:[r]:[],e.advanced={q:{},fc:{}},t)for(var c=["fc","q"],l=0;l<c.length;l++){var f=c[l];if(n.includes(f+"-")){var label=n,v=t[n];v=o(v);var d=e.advanced[f];d[label]||(d[label]={"+":[],"-":[]});for(var h=d[label],i=0;i<v.length;i++){var m=v[i];m.startsWith("-")?h["-"].push(m.slice(1)):h["+"].push(m)}}}var y=t.layout;e.layout=y||"m_sort:asc";var k=t.sort;e.sort=k||"_score:desc";var _=t.from;e.from=_?Number(_):0;var w=t.size;e.size=w?Number(w):24;var j=Math.floor(e.from/e.size)+1;e.currentPage=j;var col=t.col;e.col=col?Number(col):4},setLayout:function(e,t){e.layout=t},setCol:function(e,t){e.col=t},setResult:function(e,t){e.result=t},setFacetLabels:function(e,t){e.facetLabels=t},setFacetOptions:function(e,t){e.facetOptions=t},setFacetFlags:function(e,t){for(var i=0;i<t.length;i++){var r=t[i];e.facetFlags[r]=!0}},setSize:function(e,t){e.size=t},setSort:function(e,t){e.sort=t},setCurrentPage:function(e,t){e.currentPage=t},setFrom:function(e,t){e.from=t},setFacetFlag:function(e,t){e.facetFlag=t},setKeyword:function(e,t){e.keyword=o(t)},setAdvanced:function(e,t){var label=t.label,r=t.values;r=o(r);var n=t.type,c=e.advanced[n];c[label]||(c[label]={"+":[],"-":[]});for(var l=c[label],i=0;i<r.length;i++){var f=r[i];f.startsWith("-")?l["-"].push(f.slice(1)):l["+"].push(f)}},removeAdvanced:function(e,data){for(var label=data.label,t=data.values,r=data.type,n=e.advanced[r],o=function(i){var e=t[i],r="+";e.startsWith("-")&&(e=e.slice(1),r="-");var o=n[label][r];n[label][r]=o.filter((function(t){return t!==e}))},i=0;i<t.length;i++)o(i)},changeFacetFlags:function(e,data){e.facetOptions[data.label].open=data.value},removeKeyword:function(e,t){var r=e.keyword.filter((function(e){return!t.includes(e)}));e.keyword=r},removeKey:function(e,data){var t=e[data.label].filter((function(e){return!data.value.includes(e)}));e[data.label]=t},setData:function(e,t){e.data=t},setIndex:function(e,t){e.index=t},setSelected:function(e,t){e.selected=t},setUserUid:function(e,t){e.userUid=t},setUserName:function(e,t){e.userName=t},setSignedIn:function(e,t){e.isSignedIn=t},setUserPic:function(e,t){e.userPic=t}},f={login:function(e){var t=e.commit;console.log("login action");var r=new n.a.auth.GoogleAuthProvider;n.a.auth().signInWithPopup(r).then((function(e){var r=e.user;console.log("success : "+r.uid+" : "+r.displayName),t("setUserUid",r.uid),t("setUserName",r.displayName),t("setUserPic",r.photoURL)})).catch((function(e){var t=e.code;console.log("error : "+t)}))}},v={getUserUid:function(e){return e.userUid},getUserName:function(e){return e.userName},getItems:function(e){return e.items},getIsSignedIn:function(e){return e.isSignedIn},getUserPic:function(e){return e.userPic}}},420:function(e,t,r){var map={"./en":[305,0],"./en.json":[305,0],"./ja":[306,1],"./ja.json":[306,1]};function n(e){if(!r.o(map,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=map[e],n=t[0];return r.e(t[1]).then((function(){return r.t(n,3)}))}n.keys=function(){return Object.keys(map)},n.id=420,e.exports=n},440:function(e,t,r){var map={"./ja":215,"./ja.js":215};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}n.keys=function(){return Object.keys(map)},n.resolve=o,e.exports=n,n.id=440},92:function(e,t,r){"use strict";var n={layout:"empty",props:{error:{type:Object,default:null}},data:function(){return{pageNotFound:"404 Not Found",otherError:"An error occurred"}},head:function(){return{title:404===this.error.statusCode?this.pageNotFound:this.otherError}}},o=(r(335),r(82)),c=r(95),l=r.n(c),f=r(456),v=r(457),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{dark:""}},[r("v-container",{staticClass:"my-5"},[404===e.error.statusCode?r("h1",[e._v("\n      "+e._s(e.pageNotFound)+"\n    ")]):r("h1",[e._v("\n      "+e._s(e.otherError)+"\n    ")]),e._v(" "),r("NuxtLink",{attrs:{to:"/"}},[e._v(" Home page ")])],1)],1)}),[],!1,null,"66a519aa",null);t.a=component.exports;l()(component,{VApp:f.a,VContainer:v.a})}},[[311,11,3,12]]]);